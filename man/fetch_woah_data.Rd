% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_woah_data.R
\name{fetch_woah_data}
\alias{fetch_woah_data}
\title{Fetch and Combine WOAH Outbreak Data}
\usage{
fetch_woah_data(
  start_date,
  end_date,
  disease_name = NULL,
  batch_interval = "1 month",
  language = "en",
  verbose = TRUE
)
}
\arguments{
\item{start_date}{Character string or Date object for the start of the overall date range (YYYY-MM-DD).}

\item{end_date}{Character string or Date object for the end of the overall date range (YYYY-MM-DD).}

\item{disease_name}{Optional: Character string specifying the exact disease name to filter by.
If NULL (default), fetches data for all diseases.}

\item{batch_interval}{Character string specifying the interval for batch processing
(e.g., "1 month", "2 weeks", "10 days"). Default is "1 month". Set to `NULL`
to process the entire range at once (not recommended for large ranges).}

\item{language}{Language code for API requests (default: "en").}

\item{verbose}{Logical: Print progress messages? (Default: TRUE).}
}
\value{
A list containing two elements:
  \itemize{
    \item `locations`: A data frame of combined location data from all successful batches, or `NULL` if no location data was fetched.
    \item `details`: A list of data frames, where each element corresponds to a table from the full outbreak details (e.g., 'outbreak', 'adminDivisions', 'speciesQuantities'), combined across all successful batches. Returns `NULL` if no details data was fetched.
  }
  Returns `NULL` overall if a critical error occurs during input validation or date processing. Issues during API fetching for specific batches are reported as warnings, and data from failed batches is excluded.
}
\description{
Fetches outbreak data (locations and full details) from the WOAH API for a
specified date range, potentially in batches, and returns the combined data
as a list.
}
\details{
This function performs the following steps:
\enumerate{
  \item Splits the date range into smaller intervals if necessary (using `batch_interval`).
  \item For each date interval:
    \itemize{
      \item Fetches location data using `rwahis::get_woah_outbreak_locations`.
      \item Fetches full outbreak details using `rwahis::get_woah_outbreaks_full_info`.
      \item Stores the fetched data in memory.
    }
  \item After fetching all data:
    \itemize{
      \item Combines the data from all successful batches.
      \item Returns the combined data.
    }
}
This function does *not* interact with any database.
}
\examples{
\dontrun{
# Fetch HPAI data for March 2025
hpai_data <- fetch_woah_data(
  start_date = "2025-03-01",
  end_date = "2025-03-31",
  disease_name = "Influenza A virus (Inf. with high pathogenicity) (OIE-listed)",
  batch_interval = "1 month"
)

# Inspect the fetched data
if (!is.null(hpai_data)) {
  print(head(hpai_data$locations))
  print(names(hpai_data$details))
  if ("speciesQuantities" \%in\% names(hpai_data$details)) {
    print(head(hpai_data$details$speciesQuantities))
  }
}

# Fetch all FMD data for Q1 2025 in 2-week batches
fmd_data <- fetch_woah_data(
  start_date = "2025-01-01",
  end_date = "2025-03-31",
  disease_name = "Foot and mouth disease virus (Inf. with) ",
  batch_interval = "2 weeks"
)
}
}
